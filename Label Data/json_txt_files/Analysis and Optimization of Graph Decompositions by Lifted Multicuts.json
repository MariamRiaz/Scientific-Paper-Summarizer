{"sections": [{"heading": "1. Introduction", "text": "This article is about the set of all decompositions (clusterings) of a graph. A decomposition of a graph G = (V,E) is a partition \u03a0 of the node set V such that, for every subset U \u2208 \u03a0 of nodes, the subgraph of G induced by U is connected. An example is depicted in Fig. 1. Decompositions of a graph arise in practice, as feasible solutions of clustering problems, and in theory, as a generalization of partitions of a set, to which they specialize for complete graphs.\nWe study the set of all decompositions of a graph through its characterization as a set of multicuts. A multicut of G is a subset M \u2286 E of edges such that, for every (chordless) cycle C \u2286 E of G, we have |M \u2229 C| 6= 1. An example is depicted in Fig. 1. For any graph G, a one-to-one relation exists between the decompositions and the multicuts of G. The multicut induced by a decomposition is the set of edges that straddle distinct components. Multicuts are useful in the study of decompositions as the characteristic function x \u2208 {0, 1}E of a multicut x\u22121(1) of G makes explicit, for every pair {v, w} \u2208 E of neighboring nodes, whether v and w are in distinct components. To make explicit also for nonneighboring nodes, specifically, for all {v, w} \u2208 E\u2032 with\n*Equal contribution 1Max Planck Institute for Informatics, Saarbru\u0308cken, Germany. Correspondence to: Bjoern Andres <andres@mpi-inf.mpg.de>.\nProceedings of the 34 th International Conference on Machine Learning, Sydney, Australia, PMLR 70, 2017. Copyright 2017 by the author(s).\nE \u2286 E\u2032 \u2286 ( V 2 ) , whether v andw are in distinct components, we define a lifting of the multicuts of G to multicuts of G\u2032 = (V,E\u2032). The multicuts of G\u2032 lifted from G are still in one-to-one relation with the decompositions of G. Yet, they are a more expressive model of these decompositions than the multicuts of G. We apply lifted multicuts in three ways:\nFirstly, we study problems related to the definition of a class of decompositions by must-cut or must-join constraints (Section 4). Such constraints have applications where defining a decomposition totally is an ambiguous and tedious task, e.g., in the field of image segmentation. The first problem is to decide whether a set of such constraints is consistent, i.e., whether a decomposition of the given graph exists that satisfies the constraints. We show that this decision problem is NP-complete in general and can be solved efficienty for a subclass of constraints. The second problem is to decide whether a consistent set of must-join and must-cut constraints is maximally specific, i.e., whether no such constraint can be added without changing the set of decompositions that satisfy the constraints. We show that this decision problem is NP-hard in general and can be solved efficienty for a subclass of constraints. This finding is relevant for comparing the classes of decompositions definable by mustjoin and must-cut constraints by certain metrics, which is the next topic.\nAs a second application of lifted multicuts, we study the comparison of decompositions and classes of decompositions by metrics (Section 5). To obtain a metric on the set of all decompositions of a given graph, we define a metric on a set of lifted multicuts that characterize these decompositions.\nBy lifting to different graphs, we obtain different metrics, two of which are well-known and here generalized. To extend this metric to the classes of decompositions definable by must-join and must-cut constraints, we define a metric on partial lifted multicuts that characterize these classes, connecting results of Sections 4 and 5. We show that computing this metric is NP-hard in general and efficient for a subclass of must-join and must-cut constraints. These findings have implications on the applicability of must-join and must-cut constraints as a form of supervision, more specifically, on the practicality of certain error metrics and loss functions.\nAs a third application of lifted multicuts, we study the optimization of graph decompositions by minimum cost lifted multicuts. The minimum cost lifted multicut problem is a generalization of the correlation clustering problem. Its applications in the field of computer vision are mentioned below. To tackle this problem, we establish some properties of some facets of lifted multicut polytopes (Fig. 2 and 3), define efficient separation procedures and apply these in a branch-and-cut algorithm."}, {"heading": "1.1. Related Work", "text": "Initial motivation to study decompositions of a graph by multicuts came from the field of polyhedral optimization. Multicut polytopes are studied by Gro\u0308tschel & Wakabayashi (1989); Deza et al. (1991; 1992); Chopra & Rao (1993; 1995) and Deza & Laurent (1997) who characterize several classes of their facets.\nThe binary linear program whose feasible solutions are all multicuts of a graph is known as the correlation clustering problem from the work of Bansal et al. (2004) and Demaine et al. (2006) who establish its APX-hardness and a logarithmic approximation. The stability of its solutions is analyzed by Nowozin & Jegelka (2009). Generalizations to multilinear objective functions are studied by Kim et al. (2014) and Kappes et al. (2016). The problem remains NP-hard for planar graphs (Voice et al., 2012; Bachrach et al., 2013) where it admits a PTAS (Klein et al., 2015) and relaxations that are often tight in practice (Yarkony et al., 2012).\nThe lifting of multicuts we define makes path connectedness explicit. For a single component, this is studied by Nowozin & Lampert (2010) who introduce the connected subgraph polytope and outer relaxations. Applications of the minimum cost lifted multicut problem and experimental comparisons to the correlation clustering problem in the field of computer vision are by Keuper et al. (2015) and Tang et al. (2017) who find feasible solutions by local search (Keuper et al., 2015; Levinkov et al., 2017), and by Beier et al. (2017) who find feasible solutions by consensus optimization (Beier et al., 2016). The complexity of several decision problems related to clustering with must-join and must-cut constraints is established by Davidson & Ravi (2007). Well-known metrics on the set of all decompositions of a graph are the metric of Rand (1971) and the variation of information (Meila\u0306, 2007)."}, {"heading": "2. Multicuts", "text": "Definition 1 Let G = (V,E) be any graph. A subgraph G\u2032 = (V \u2032, E\u2032) of G is called a component of G iff G\u2032 is non-empty, node-induced1, and connected2. A partition \u03a0 of V is called a decomposition of G iff, for every U \u2208 \u03a0, the subgraph (U,E \u2229 ( U 2 ) ) of G induced by U is connected (and hence a component of G).\nFor any graph G, we denote by DG \u2282 22 V\nthe set of all decompositions ofG. Useful in the study of decompositions are the multicuts of a graph: Definition 2 For any graph G = (V,E), a subset M \u2286 E of edges is called a multicut of G iff, for every cycle C \u2286 E of G, we have |C \u2229M | 6= 1. Lemma 1 (Chopra & Rao, 1993) It is sufficient in Def. 2 to consider only the chordless cycles.\nFor any graph G, we denote by MG \u2286 2E the set of all multicuts of G. One reason why multicuts are useful in\n1That is: E\u2032 = E \u2229 ( V \u2032\n2 ) 2We do not require a component to be maximal w.r.t. the sub-\ngraph relation.\nthe study of decompositions is that, for every graph G, a one-to-one relation exists between the decompositions and the multicuts of G. An example is depicted in Fig. 1: Lemma 2 For any graph G = (V,E), the map \u03c6G : DG \u2192 2E defined by (1) is a bijection from DG to MG.\n\u2200\u03a0 \u2208 DG \u2200{v, w} \u2208 E : {v, w} \u2208 \u03c6G(\u03a0) \u21d4 \u2200U \u2208 \u03a0(v /\u2208 U \u2228 w /\u2208 U) (1)\nAnother reason why multicuts are useful in the study of decompositions is that, for any graph G = (V,E) and any decomposition \u03a0 of G, the characteristic function of the multicut induced by \u03a0 is a 01-encoding of \u03a0 of fixed length |E|. Lemma 3 (Chopra & Rao, 1993) For any graph G = (V,E) and any x \u2208 {0, 1}E , the set x\u22121(1) of those edges that are labeled 1 is a multicut of G iff (2) holds. It is sufficient in (2) to consider only chordless cycles.\n\u2200C \u2208 cycles(G) \u2200e \u2208 C : xe \u2264 \u2211\ne\u2032\u2208C\\{e}\nxe\u2032 (2)\nFor any graph G = (V,E), we denote by XG the set of all x \u2208 {0, 1}E that satisfy (2)."}, {"heading": "2.1. Complete Graphs", "text": "The decompositions of a complete graph KV := (V, ( V 2 ) ) are precisely the partitions of the node set V (by Def. 1). The multicuts of a complete graph KV relate one-to-one to the equivalence relations on V : Lemma 4 For any set V and the complete graph KV , the map \u03c8 : MKV \u2192 2V\u00d7V defined by (3) is a bijection between MKV and the set of all equivalence relations on V .\n\u2200M \u2208MKV \u2200v, w \u2208 V : (v, w) \u2208 \u03c8(M) \u21d4 {v, w} /\u2208M (3)\nThe bijection between the decompositions of a graph and the multicuts of a graph (Lemma 2) specializes, for complete graphs, to the well-known bijection between the partitions of a set and the equivalence relations on the set (by Lemma 4). In this sense, decompositions and multicuts of graphs generalize partitions of sets and equivalence relations on sets."}, {"heading": "3. Lifted Multicuts", "text": "For any graph G = (V,E), the characteristic function x \u2208 XG of a multicut x\u22121(1) of G makes explicit, for every pair {v, w} \u2208 E of neighboring nodes, whether v and w are in distinct components. To make explicit also for nonneighboring nodes, specifically, for all {v, w} \u2208 E\u2032 with E \u2286 E\u2032 \u2286 ( V 2 ) , whether v andw are in distinct components, we define a lifting of the multicuts of G to multicuts of G\u2032 = (V,E\u2032):\nDefinition 3 For any graphs G = (V,E) and G\u2032 = (V,E\u2032) with E \u2286 E\u2032, the composed map \u03bbGG\u2032 := \u03c6G\u2032 \u25e6 \u03c6\u22121G is called the lifting of multicuts from G to G\u2032.\nFor any graphsG = (V,E) andG\u2032 = (V,E\u2032) withE \u2286 E\u2032, we introduce the notation FGG\u2032 := E\u2032 \\ E, for brevity. Lemma 5 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any x \u2208 {0, 1}E\u2032 , the set x\u22121(1) is a multicut of G\u2032 lifted from G iff\n\u2200C \u2208 cycles(G)\u2200e \u2208 C : xe \u2264 \u2211\ne\u2032\u2208C\\{e}\nxe\u2032 (4)\n\u2200vw \u2208 FGG\u2032 \u2200P \u2208 vw-paths(G) : xvw \u2264 \u2211 e\u2208P xe (5)\n\u2200vw \u2208 FGG\u2032 \u2200C \u2208 vw-cuts(G) : 1\u2212 xvw \u2264 \u2211 e\u2208C (1\u2212 xe)\n(6)\nFor any graphs G = (V,E) and G\u2032 = (V,E\u2032) with E \u2286 E\u2032 we denote by XGG\u2032 the set of all x \u2208 {0, 1}E \u2032 that satisfy (4)\u2013(6)."}, {"heading": "4. Partial Lifted Multicuts", "text": "As a first application of lifted multicuts, we study the class of decompositions of a graph definable by must-join and must-cut constraints. For this, we consider partial functions. For any set E, a partial characteristic function of subsets of E is a function from any subset F \u2286 E to {0, 1}. With some abuse of notation, we denote the set of all partial characteristic functions of subsets of E by {0, 1, \u2217}E :=\u22c3 F\u2286E{0, 1}F . For any x \u2208 {0, 1, \u2217}E , we denote the domain of x by domx := x\u22121({0, 1}).\nFor any connected graph G = (V,E) whose decompositions we care about and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, we consider a partial function x\u0303 \u2208 {0, 1, \u2217}E\u2032 . For any {v, w} \u2208 dom x\u0303, we constrain the nodes v and w to the same component if x\u0303vw = 0 and to distinct components if x\u0303vw = 1."}, {"heading": "4.1. Consistency", "text": "A natural question to ask is whether a decomposition of the graph G exists that satisfies these constraints. We show that this decision problem is NP-complete.\nDefinition 4 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, and any x\u0303 \u2208 {0, 1, \u2217}E\u2032 , the elements of\nXGG\u2032 [x\u0303] := {x \u2208 XGG\u2032 | \u2200e \u2208 dom x\u0303 : xe = x\u0303e} (7)\nare called the completions of x\u0303 in XGG\u2032 . In addition, x\u0303 is called consistent and a partial characterization of multicuts\nof G\u2032 lifted from G iff\nXGG\u2032 [x\u0303] 6= \u2205 . (8)\nWe denote the set of all partial characterizations of multicuts of G\u2032 lifted from G by\nX\u0303GG\u2032 := { x\u0303 \u2208 {0, 1, \u2217}E \u2032 \u2223\u2223\u2223XGG\u2032 [x\u0303] 6= \u2205} . (9)\nTheorem 1 Deciding consistency is NP-complete.\nLemma 6 Consistency can be decided efficiently if E \u2286 dom x\u0303 or\n\u2200vw \u2208 dom x\u0303 \\ E : x\u0303vw = 1 \u2228 \u2203P \u2208 vw-path(G)\u2200e \u2208 P : x\u0303e = 0 (10)"}, {"heading": "4.2. Specificity", "text": "A less obvious question to ask for any partial characterization x\u0303 of multicuts of G\u2032 lifted from G is whether x\u0303 is maximally specific for its completions in XGG\u2032 . In other words, is there no edge e \u2208 E\u2032 \\ dom x\u0303 such that, for any completions x, x\u2032 of x\u0303 in XGG\u2032 , we have xe = x\u2032e, i.e., an edge that could be included in dom x\u0303 without changing the set of completions of x\u0303 in XGG\u2032? We show that deciding maximal specificity is NP-hard.\nDefinition 5 Let G = (V,E) a connected graph and G\u2032 = (V,E\u2032) a graph with E \u2286 E\u2032. For any x\u0303 \u2208 X\u0303GG\u2032 , the edges\nE\u2032[x\u0303] := {e \u2208 E\u2032 | \u2200x, x\u2032 \u2208 XGG\u2032 [x\u0303] : xe = x\u2032e} (11)\nare called decided. The edges E\u2032 \\ E\u2032[x\u0303] are called undecided. Moreover, x\u0303 is called maximally specific iff3\nE\u2032[x\u0303] \u2286 dom x\u0303 . (12)\nTheorem 2 Deciding maximal specificity is NP-hard.\nLemma 7 Maximal specificity can be decided efficiently if E\u2032 = E or E \u2286 dom x\u0303.\nBelow, we justify the term maximal specificity and define an operation that maps any partial characterization of lifted multicuts to one that is maximally specific.\nDefinition 6 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, the relation \u2264 on X\u0303GG\u2032 defined by (13) is called the specificity of partial characterizations of multicuts of G\u2032 lifted from G.\n\u2200x\u0303, x\u0303\u2032 \u2208 X\u0303GG\u2032 : (13) x\u0303 \u2264 x\u0303\u2032 \u21d4 dom x\u0303 \u2286 dom x\u0303\u2032 \u2227 \u2200e \u2208 dom x\u0303 : x\u0303e = x\u0303\u2032e 3Note that (12) is equivalent to E\u2032[x\u0303] = dom x\u0303, as E\u2032[x\u0303] \u2287\ndom x\u0303 holds by definition of E\u2032[x\u0303].\nLemma 8 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, specificity is a partial order on X\u0303GG\u2032 .\nNote that two partial characterizations x\u0303, x\u0303\u2032 \u2208 X\u0303GG\u2032 with the same completions XGG\u2032 [x\u0303] = XGG\u2032 [x\u0303\u2032] need not be comparable w.r.t.\u2264. For example, consider the graphsG,G\u2032 from Fig. 3, consider x\u0303 : e1 7\u2192 0, e2 7\u2192 0 and x\u0303\u2032 : f 7\u2192 0. Nevertheless, we have the following lemma. Lemma 9 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, any x\u0303 \u2208 X\u0303GG\u2032 and\nX\u0303GG\u2032 [x\u0303] := { x\u0303\u2032 \u2208 X\u0303GG\u2032 \u2223\u2223\u2223XGG\u2032 [x\u0303\u2032] = XGG\u2032 [x\u0303]} (14) a maximum of X\u0303GG\u2032 [x\u0303] w.r.t. \u2264 exists and is unique. Moreover, x\u0303 is maximally specific in the sense of Def. 5 iff x\u0303 is maximal w.r.t. \u2264 in X\u0303GG\u2032 [x\u0303]. Definition 7 Let G = (V,E) be a connected graph and let G\u2032 = (V,E\u2032) be a graph with E \u2286 E\u2032. For any x\u0303 \u2208 X\u0303GG\u2032 , we call the unique maximum of X\u0303GG\u2032 [x\u0303] w.r.t.\u2264 the closure of x\u0303 w.r.t. G and G\u2032 and denote it by clGG\u2032 x\u0303.\nWe denote by X\u0302GG\u2032 the set of all maximally specific partial characterizations of multicuts of G\u2032 lifted from G, i.e.:\nX\u0302GG\u2032 := { x\u0303 \u2208 X\u0303GG\u2032 \u2223\u2223\u2223 x\u0303 = clGG\u2032 x\u0303} . (15) Theorem 3 For any x\u0303, x\u0303\u2032 \u2208 X\u0303GG\u2032 , we have XGG\u2032 [x\u0303] = XGG\u2032 [x\u0303\n\u2032]\u21d4 X\u0303GG\u2032 [x\u0303] = X\u0303GG\u2032 [x\u0303\u2032]\u21d4 clGG\u2032 x\u0303 = clGG\u2032 x\u0303\u2032. Lemma 10 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any x \u2208 XG, the closure y := clGG\u2032 x of x w.r.t. G and G\u2032 coincides with the lifting of the multicut x\u22121(1) of G to the multicut y\u22121(1) of G\u2032, i.e.\n(clGG\u2032 x) \u22121(1) = \u03bbGG\u2032(x \u22121(1)) . (16)\nTheorem 4 Computing closures is NP-hard. Lemma 11 In the special case thatE\u2032 = E orE \u2286 dom x\u0303, the closure can be computed efficiently."}, {"heading": "5. Metrics", "text": ""}, {"heading": "5.1. Metrics on Decompositions", "text": "As a second application of lifted multicuts, we compare decompositions of a given graph by comparing lifted multicuts that characterize these decompositions. We compare these lifted multicuts by comparing their characteristic functions by Hamming metrics: For any E 6= \u2205 and any e \u2208 E, we define d1e, d 1 E : {0, 1}E \u00d7 {0, 1}E \u2192 N + 0 by the forms\nd1e(x, x \u2032) = { 0 ifxe = x\u2032e 1 otherwise\n(17)\nd1E(x, x \u2032) = \u2211 e\u2032\u2208E d1e\u2032(x, x \u2032) . (18)\nTheorem 5 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032), any \u00b5 : E\u2032 \u2192 R+, the set E\u2032\u2032 := E \u222a E\u2032 and the graph G\u2032\u2032 := (V,E\u2032\u2032), the function d\u00b5E\u2032 : XGG\u2032\u2032 \u00d7XGG\u2032\u2032 \u2192 R+0 of the form (19) is a pseudo-metric on XGG\u2032\u2032 . Iff G\u2032 is a supergraph of G, i.e., iff E \u2286 E\u2032, d\u00b5E\u2032 is a metric on XGG\u2032\u2032 .\nd\u00b5E\u2032(x, x \u2032) := \u2211 e\u2208E\u2032 \u00b5e d 1 e(x, x \u2032) (19)\nBy the one-to-one relation between decompositions and multicuts (Lemma 2), d\u00b5E\u2032 induces a pseudo-metric on the set DG of all decompositions of G. Two special cases are well-known: For E\u2032 = E and \u00b5 = 1, we have d\u00b5E\u2032 = d 1 E , which is the Hamming metric (18) on the multicuts that characterize the decompositions, also known as the boundary metric on decompositions. For E\u2032 = ( V 2 ) and \u00b5 = 1, d1E\u2032 specializes to the metric of Rand (1971). Between these extremes, i.e., for E \u2286 E\u2032 \u2286 ( V 2 ) , the metric d\u00b5E\u2032 can be used to analyze more specifically how two decompositions of the same graph differ. We propose an analysis w.r.t. the distance \u03b4vw of nodes v and w in G, i.e., w.r.t. the length of a shortest vw-path in G. For this, we denote by \u03b4G := max{\u03b4vw : vw \u2208 ( V 2 ) } the diameter of G.\nDefinition 8 For any connected graph G = (V,E) and any n \u2208 N, let E[n] := {vw \u2208 ( V 2 ) | \u03b4vw = n} the set of pairs of nodes of distance n in G. Moreover, let \u00b5n : E[n]\u2192 Q+ the constant function that maps any vw \u2208 E[n] to 1/|E[n]|. For any connected graph G = (V,E), we call the sequence(\nd\u00b5 n\nE[n] ) n\u2208{1,...,\u03b4G}\n(20)\nthe spectrum of pseudo-metrics on decompositions of G. For E\u2032 := ( V 2 ) and \u00b5 : E\u2032 \u2192 Q+ : vw 7\u2192 1/(\u03b4G|E[\u03b4vw]|), we call the metric d\u00b5E\u2032 the \u03b4-metric on decompositions of G.\nAn example of a spectrum of pseudo-metrics is depicted in Fig. 4. For any two decompositions \u03a0,\u03a0\u2032 of a connected graph G and suitable lifted multicuts x, x\u2032 characterizing these decompositions, d\u00b5 n\nE[n](x, x \u2032) equals the fraction of\npairs of nodes at distance n in G that are either cut by \u03a0 and joined by \u03a0\u2032, or cut by \u03a0\u2032 and joined by \u03a0. I.e., the pseudometric d\u00b5 n\nE[n] compares decompositions of G specifically w.r.t. the distance n in G. The \u03b4-metric compares decompositions w.r.t. all distances, and each distance is weighted equally. This is in contrast to Rand\u2019s metric which is also a comparison w.r.t. all distances but each distance is weighted by the number of pairs of nodes that have this distance."}, {"heading": "5.2. Metrics on Classes of Decompositions", "text": "We compare classes of decompositions definable by mustjoin and must-cut constraints by comparing partial lifted\nmulticuts that characterize these decompositions. To compare partial lifted multicuts, we compare their partial characteristic functions by an extension of the Hamming metric: For any E 6= \u2205, any e \u2208 E and any \u03b8 \u2208 R+0 , we define d\u03b8e, d \u03b8 E : {0, 1, \u2217}E \u00d7 {0, 1, \u2217}E \u2192 R + 0 such that for all x\u0303, x\u0303\u2032 \u2208 {0, 1, \u2217}E :\nd\u03b8e(x\u0303, x\u0303 \u2032) =  1 if e \u2208 dom x\u0303 \u2227 e \u2208 dom x\u0303\u2032 \u2227 x\u0303e 6= x\u0303\u2032e 0 if e \u2208 dom x\u0303 \u2227 e \u2208 dom x\u0303\u2032 \u2227 x\u0303e = x\u0303\u2032e 0 if e /\u2208 dom x\u0303 \u2227 e /\u2208 dom x\u0303\u2032\n\u03b8 otherwise (21)\nd\u03b8E(x\u0303, x\u0303 \u2032) = \u2211 e\u2032\u2208E d\u03b8e\u2032(x\u0303, x\u0303 \u2032) . (22)\nTheorem 6 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any \u03b8 \u2208 [ 12 , 1], the function d\u0303\u03b8E\u2032 : X\u0303GG\u2032 \u00d7 X\u0303GG\u2032 \u2192 R + 0 of the form\nd\u0303\u03b8E\u2032(x\u0303, x\u0303 \u2032) := d\u03b8E\u2032(clGG\u2032 x\u0303, clGG\u2032 x\u0303 \u2032) (23)\nis a pseudo-metric on X\u0303GG\u2032 and a metric on X\u0302GG\u2032 . Moreover, for any x\u0303, x\u0303\u2032 \u2208 X\u0303GG\u2032 :\nX\u0303GG\u2032 [x\u0303] = X\u0303GG\u2032 [x\u0303 \u2032] \u21d4 d\u0303\u03b8E\u2032(x\u0303, x\u0303\u2032) = 0 . (24)\nBy the one-to-one relation between decompositions and multicuts (Lemma 2), every partial characterization of a lifted multicut x\u0303 \u2208 X\u0303GG\u2032 defines a class of decompositions of the graph G, namely those defined by the lifted multicuts characterized by XGG\u2032 [x\u0303]. By Theorem 6, d\u0303\u03b8E\u2032 with \u03b8 \u2208 [ 12 , 1] well-defines a metric on these classes of decompositions and hence a means of comparing the classes of decompositions definable by must-join and must-cut constraints. Computing d\u0303\u03b8E\u2032(x, x\n\u2032) involves computing the closures of x and x\u2032 and is therefore NP-hard (by Theorem 4)."}, {"heading": "6. Polyhedral Optimization", "text": "As a third and final application of lifted multicuts, we turn to the optimization of graph decompositions by lifted multicuts of minimum cost.\nDefinition 9 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any c : E\u2032 \u2192 R, the instance of the minimum cost lifted multicut problem w.r.t. G, G\u2032 and c is the optimization problem\nmin {\u2211 e\u2208E\u2032 cexe \u2223\u2223\u2223\u2223\u2223 x \u2208 XGG\u2032 } . (25)\nIf E\u2032 = E, (25) specializes to the minimum cost multicut problem w.r.t. G\u2032 and c that is also known as graph partition or correlation clustering. If E\u2032 \u2283 E, the minimum cost lifted multicut problem w.r.t. G, G\u2032 and c differs from the minimum cost multicut problem w.r.t. G\u2032 and c. It has a smaller feasible set XGG\u2032 \u2282 XG\u2032 , as we have shown in Section 3 and depicted for the smallest example in Fig. 2 and 3. Unlike the minimum cost multicut problem w.r.t. G\u2032 and c, the minimum cost lifted multicut problem w.r.t.G,G\u2032 and c is such that any feasible solution x \u2208 XGG\u2032 indicates by xvw = 0 that the nodes v and w are connected in G by a path of edges labeled 0. See also Fig. 5. This property can be used to penalize by cvw > 0 precisely those decompositions of G for which v and w are in distinct components. For nodes v and w that are not neighbors in G, such costs are sometimes called non-local attractive.\nTo solve instances of the APX-hard minimum cost lifted multicut problem by means of a branch-and-cut algorithm, we study the geometry of lifted multicut polytopes.\nDefinition 10 (Deza & Laurent, 1997) For any graph G = (V,E), the convex hull \u039eG := convXG of XG in RE is called the multicut polytope of G.\nDefinition 11 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, \u039eGG\u2032 := convXGG\u2032 is called the lifted multicut polytope w.r.t. G and G\u2032.\nExamples are shown in Fig. 2 and 3, respectively. In general, the lifted multicut polytope \u039eGG\u2032 w.r.t. graphs G and G\u2032 (Fig. 3) is a subset of the multicut polytope \u039eG\u2032 of the graph G\u2032 (Fig. 2). By Lemma 5, the system of cycle inequalities\n(2) for G\u2032 and cut inequalities (6) for G and G\u2032 is redundant as a description ofXGG\u2032 and thus of \u039eGG\u2032 . Below, we study the geometry of \u039eGG\u2032 ."}, {"heading": "6.1. Dimension", "text": "Theorem 7 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, dim \u039eGG\u2032 = |E\u2032|.\nWe prove Theorem 7 by constructing |E\u2032|+ 1 multicuts of G\u2032 lifted from G whose characteristic functions are affine independent points. The strategy is to construct, for any e \u2208 E\u2032, an x \u2208 XGG\u2032 with xe = 0 and \u201cas many ones as possible\u201d. The challenge is that edges cannot be labeled independently. In particular, for f \u2208 FGG\u2032 , xf = 0 can imply, for certain f \u2032 \u2208 FGG\u2032 \\ {f}, that xf \u2032 = 0, as illustrated in Fig. 6. This structure is made explicit below, in Def. 12 and 13 and Lemmata 12 and 13.\nDefinition 12 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) such that E \u2286 E\u2032, the sequence (Fn)n\u2208N of subsets of FGG\u2032 defined below is called the hierarchy of FGG\u2032 with respect to G:\n(a) F0 = \u2205 (b) For any n \u2208 N and any {v, w} = f \u2208 FGG\u2032 : {v, w} \u2208 Fn iff there exists a vw-path in G such that, for any distinct nodes v\u2032 and w\u2032 in the path such that {v\u2032, w\u2032} 6= {v, w}, either {v\u2032, w\u2032} 6\u2208 FGG\u2032 or there exists a natural number j < n such that {v\u2032, w\u2032} \u2208 Fj .\nLemma 12 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any f \u2208 FGG\u2032 , there exists an n \u2208 N such that f \u2208 Fn. Definition 13 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, the map ` : FGG\u2032 \u2192 N such that \u2200f \u2208 FGG\u2032\u2200n \u2208 N : `(f) = n \u21d4 f \u2208 Fn \u2227 f 6\u2208 Fn\u22121 is called the level function of FGG\u2032 . Lemma 13 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and for any f \u2208 FGG\u2032 , there exists an x \u2208 XGG\u2032 , called f -feasible, such that\n(a) xf = 0 (b) xf \u2032 = 1 for all f \u2032 \u2208 FGG\u2032 \\ {f} with `(f \u2032) \u2265 `(f)."}, {"heading": "6.2. Facets", "text": "We characterize those edges e \u2208 E\u2032 for which the inequality xe \u2264 1 defines a facet of the lifted multicut polytope \u039eGG\u2032 . Theorem 8 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any e \u2208 E\u2032, the inequality xe \u2264 1 defines a facet of \u039eGG\u2032 iff there is no {v, w} = f \u2208 FGG\u2032 such that e connects a pair of v-w-cutvertices4.\n4For any graph G = (V,E) and any v, w \u2208 V , a v-w-cutvertex is a node u \u2208 V that lies on every vw-path of G.\nNext, we give conditions that contribute to identifying those edges e \u2208 E\u2032 for which the inequality 0 \u2264 xe defines a facet of the lifted multicut polytope \u039eGG\u2032 .\nTheorem 9 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032 and any e \u2208 E\u2032, the following assertions hold: In case e \u2208 E, the inequality 0 \u2264 xe defines a facet of \u039eGG\u2032 iff there is no triangle in G\u2032 containing e. In case uv = e \u2208 FGG\u2032 , the inequality 0 \u2264 xe defines a facet of \u039eGG\u2032 only if the following necessary conditions hold:\n(a) There is no triangle in G\u2032 containing e. (b) The distance of any pair of u-v-cut-vertices except {u, v} is at least 3 in G\u2032. (c) There is no triangle of nodes s, s\u2032, t in G\u2032 such that {s, s\u2032} is a u-v-separating node set and t is a u-v-cutvertex.\nNext, we characterize those inequalities of (4) and (5) that are facet-defining for \u039eGG\u2032 . Chopra & Rao (1993) have shown that an inequality of (2) defines a facet of the multicut polytope \u039eG iff the cycle C is chordless. We establish a similar characterization of those inequalities of (4) and (5) that define a facet of the lifted multicut polytope \u039eGG\u2032 . For clarity, we introduce some notation: For any cycle C of G and any e \u2208 C, let\nSGG\u2032(e, C) := x \u2208 XGG\u2032 \u2223\u2223\u2223\u2223\u2223\u2223xe = \u2211 e\u2032\u2208C\\{e} xe\u2032  (26) \u03a3GG\u2032(e, C) := convSGG\u2032(e, C) . (27)\nFor any vw = f \u2208 FGG\u2032 and any vw-path P in G, let\nSGG\u2032(f, P ) := { x \u2208 XGG\u2032 \u2223\u2223\u2223\u2223\u2223xvw = \u2211 e\u2208P xe } (28)\n\u03a3GG\u2032(f, P ) := convSGG\u2032(f, P ) . (29)\nTheorem 10 For any connected graph G = (V,E) and any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, the following assertions hold:\n(a) For any cycle C in G and any e \u2208 C, the polytope \u03a3GG\u2032(e, C) is a facet of \u039eGG\u2032 iff C is chordless in G\u2032. (b) For any edge vw = f \u2208 FGG\u2032 and any vw-path P in G, the polytope \u03a3GG\u2032(f, P ) is a facet of \u039eGG\u2032 iff P \u222a {f} is chordless in G\u2032.\nInequalities defined by cycles in G\u2032 that contain more than one edge from the set FGG\u2032 do not occur in (4) or (5). They are valid for \u039eGG\u2032 as they are valid for \u039eG\u2032 \u2287 \u039eGG\u2032 . They define a (non-trivial) facet of \u039eGG\u2032 only if the cycle is chordless (as chordal cycles are not even facet-defining for \u039eG\u2032). At the same time, chordlessness is not a sufficient condition for facet-definingness of non-trivial cycles. For example, in Fig. 6a, the cycle inequality xf2 \u2264 xf3 +xv1v2 is dominated by the (non-trivial) valid inequality xf2 \u2264 xf3 .\nNext, we consider the cut inequalities (6). Examples of cuts that are not facet-defining for \u039eGG\u2032 are shown in Fig. 4 in the appendix. To constrain the class of cuts that are facet-defining, we introduce additional notation: For any connected graph G = (V,E), any distinct nodes v, w \u2208 V and any C \u2208 vw-cuts(G), we denote by\nG(v, C) = (V (v, C), E(v, C)) (30) G(w,C) = (V (w,C), E(w,C)) (31)\nthe largest components of the graph (V,E \\ C) that contain v and w, respectively. By definition of a vw-cut5, we have\nV (v, C) \u2229 V (w,C) = \u2205 (32) \u2227 V (v, C) \u222a V (w,C) = V . (33)\nWe denote by FGG\u2032(vw,C) the set of those edges in FGG\u2032 , except vw, that cross the vw-cut C of G, i.e.\nFGG\u2032(vw,C) := {f \u2208 FGG\u2032 \\ {vw} | f 6\u2286 V (v, C)\u2227 f 6\u2286 V (w,C)} . (34)\nWe denote by G\u2032(vw,C) := (V, FGG\u2032(vw,C) \u222a C) the subgraph of G\u2032 that comprises all edges from FGG\u2032(vw,C) and C. Finally, we define\nSGG\u2032(vw,C) := { x \u2208 XGG\u2032 \u2223\u2223\u2223\u2223\u22231\u2212 xvw = \u2211 e\u2208C (1\u2212 xe) } (35)\n\u03a3GG\u2032(vw,C) := convSGG\u2032(vw,C) . (36)\nDefinition 14 For any connected graph G = (V,E), any distinct v, w \u2208 V and any C \u2208 vw-cuts(G), a component (V \u2217, E\u2217) of G is called properly (vw,C)-connected iff\nv \u2208 V \u2217 \u2227 w \u2208 V \u2217 \u2227 |E\u2217 \u2229 C| = 1 . (37) 5For any graph G = (V,E) and any distinct nodes v, w \u2208 V , a vw-cut of G is a minimal (with respect to inclusion) set C \u2286 E such that v and w are not connected in (V,E \\ C).\nIt is called improperly (vw,C)-connected iff\nV \u2217 \u2286 V (v, C) \u2228 V \u2217 \u2286 V (w,C) . (38)\nIt is called (vw,C)-connected iff it is properly or improperly (vw,C)-connected.\nFor any (vw,C)-connected component (V \u2217, E\u2217) of G, we denote by FV \u2217 := {v\u2032w\u2032 = f \u2032 \u2208 FGG\u2032(vw,C) | v\u2032 \u2208 V \u2217\u2227 w\u2032 \u2208 V \u2217} the set of those edges v\u2032w\u2032 = f \u2032 \u2208 FGG\u2032(vw,C) such that (V \u2217, E\u2217) is also (v\u2032w\u2032, C)-connected.\nTheorem 11 For any connected graph G = (V,E), any graph G\u2032 = (V,E\u2032) with E \u2286 E\u2032, any vw = f \u2208 FGG\u2032 and any C \u2208 vw-cuts(G), \u03a3GG\u2032(vw,C) is a facet of \u039eGG\u2032 only if the following necessary conditions hold:\nC1 For any e \u2208 C, there exists a (vw,C)-connected component (V \u2217, E\u2217) of G such that e \u2208 E\u2217.\nC2 For any \u2205 6= F \u2286 FGG\u2032(vw,C), there exists an edge e \u2208 C and (vw,C)-connected components (V \u2217, E\u2217) and (V \u2217\u2217, E\u2217\u2217) of G such that e \u2208 E\u2217 and e \u2208 E\u2217\u2217 and |F \u2229 FV \u2217 | 6= |F \u2229 FV \u2217\u2217 |.\nC3 For any f \u2032 \u2208 FGG\u2032(vw,C), any \u2205 6= F \u2286 FGG\u2032(vw,C) \\ {f \u2032} and any k \u2208 N, there exist (vw,C)-connected components (V \u2217, E\u2217) and (V \u2217\u2217, E\u2217\u2217) with f \u2032 \u2208 FV \u2217 and f \u2032 /\u2208 FV \u2217\u2217 such that\n|F \u2229 FV \u2217 | 6= k or |F \u2229 FV \u2217\u2217 | 6= 0 . (39)\nC4 For any v\u2032 \u2208 V (v, C), any w\u2032 \u2208 V (w,C) and any v\u2032w\u2032-path P = (VP , EP ) in G\u2032(vw,C), there exists a properly (vw,C)-connected component (V \u2217, E\u2217) of G such that\n(v\u2032 /\u2208 V \u2217 \u2228 \u2203w\u2032\u2032 \u2208 VP \u2229 V (w,C) : w\u2032\u2032 /\u2208 V \u2217) \u2227 (w\u2032 /\u2208 V \u2217 \u2228 \u2203v\u2032\u2032 \u2208 VP \u2229 V (v, C) : v\u2032\u2032 /\u2208 V \u2217) .\n(40)\nC5 For any cycle Y = (VY , EY ) in G\u2032(vw,C), there exists a properly (vw,C)-connected component (V \u2217, E\u2217) of G such that\n(\u2203v\u2032 \u2208 VY \u2229 V (v, C) : v\u2032 /\u2208 V \u2217) \u2227 (\u2203w\u2032 \u2208 VY \u2229 V (w,C) : w\u2032 /\u2208 V \u2217) . (41)"}, {"heading": "6.3. Algorithms", "text": "To study the relevance of geometric properties established above, we compare two separation procedures, \u03b1 and \u03b2, for lifted multicut polytopes. We implement these for the branch-and-cut algorithm in the software Gurobi. Our code is available at https://github.com/bjoern-andres/graph. The\nprocedure \u03b1 is canonical and serves as a reference. It separates infeasible points by any of the inequalities (4)\u2013(6). Violated inequalities of (4) and (5) are found by searching for shortest chordless paths. Violated inequalities of (5) are found by searching for minimum vw-cuts. The procedure \u03b2 is less canonical: It separates infeasible points by some cycle inequalities w.r.t. G\u2032 (cf. Theorem 10) and by cut inequalities (6). Violated cycle inequalities of G\u2032 are found by first seaching for paths and cycles as before but then replacing sub-paths by chords in G\u2032. Violated cut-inequalities are found as before but added to the problem only conditionally: For each violated inequality of (6) that we find and the corresponding {v, w} \u2208 FGG\u2032 and C \u2208 vw-cuts(G), we search for a vw-path P in G\u2032 such that one of the cycle inequalities for the cycle formed by P and {v, w} is violated. If it exists, only the cycle inequality is added. Otherwise, the cut-inequality is added. The advantage of \u03b2 over \u03b1 can be seen in Fig. 7 for an instance of the min cost lifted multicut problem by Keuper et al. (2015) with |V | = 126, |E| = 229 and |E\u2032| = 1860."}, {"heading": "7. Conclusion", "text": "By studying the set of all decompositions (clusterings) of a graph through its characterization as a set of lifted multicuts, we have gained three insights: 1. Toward the definition of classes of decompositions by must-join and must-cut constraints, we have seen that consistency and maximal specificity are NP-hard to decide. 2. Toward the comparison of decompositions by metrics, we have defined a generalization of Rand\u2019s metric and the boundary metric that enables more detailed analyses of how two decompositions of the same graph differ. This metric extends to classes of decompositions definable by must-join and must-cut constraints for which it is NP-hard to compute. 3. Toward the optimization of graph decompositions by minimum cost lifted multicuts, we have established some properties of some facets of lifted multicut polytopes. These properties have led us to efficient separation procedures and a branch-and-cut algorithm for the minimum cost lifted multicut problem."}], "year": 2017, "references": [{"title": "Contour detection and hierarchical image segmentation", "authors": ["Arbel\u00e1ez", "Pablo", "Maire", "Michael", "Fowlkes", "Charless C", "Malik", "Jitendra"], "venue": "IEEE Transactions on Pattern Analysis and Machine Intelligence,", "year": 2011}, {"title": "Optimal coalition structure generation in cooperative graph games", "authors": ["Bachrach", "Yoram", "Kohli", "Pushmeet", "Kolmogorov", "Vladimir", "Zadimoghaddam", "Morteza"], "venue": "In AAAI,", "year": 2013}, {"title": "Correlation clustering", "authors": ["Bansal", "Nikhil", "Blum", "Avrim", "Chawla", "Shuchi"], "venue": "Machine Learning,", "year": 2004}, {"title": "An efficient fusion move algorithm for the minimum cost lifted multicut problem", "authors": ["Beier", "Thorsten", "Andres", "Bjoern", "K\u00f6the", "Ullrich", "Hamprecht", "Fred A"], "venue": "In ECCV,", "year": 2016}, {"title": "The partition problem", "authors": ["Chopra", "Sunil", "M.R. Rao"], "venue": "Mathematical Programming,", "year": 1993}, {"title": "Facets of the k-partition polytope", "authors": ["Chopra", "Sunil", "M.R. Rao"], "venue": "Discrete Applied Mathematics,", "year": 1995}, {"title": "Intractability and clustering with constraints", "authors": ["Davidson", "Ian", "S.S. Ravi"], "venue": "In ICML,", "year": 2007}, {"title": "Correlation clustering in general weighted graphs", "authors": ["Demaine", "Erik D", "Emanuel", "Dotan", "Fiat", "Amos", "Immorlica", "Nicole"], "venue": "Theoretical Computer Science,", "year": 2006}, {"title": "Clique-web facets for multicut polytopes", "authors": ["Deza", "Michel Marie", "Gr\u00f6tschel", "Martin", "Laurent", "Monique"], "venue": "Mathematics of Operations Research,", "year": 1992}, {"title": "A cutting plane algorithm for a clustering problem", "authors": ["Gr\u00f6tschel", "Martin", "Wakabayashi", "Yoshiko"], "venue": "Mathematical Programming,", "year": 1989}, {"title": "Higher-order segmentation via multicuts", "authors": ["Kappes", "J\u00f6rg Hendrik", "Speth", "Markus", "Reinelt", "Gerhard", "Schn\u00f6rr", "Christoph"], "venue": "Computer Vision and Image Understanding,", "year": 2016}, {"title": "Efficient decomposition of image and mesh graphs by lifted multicuts", "authors": ["Keuper", "Margret", "Levinkov", "Evgeny", "Bonneel", "Nicolas", "Lavou\u00e9", "Guillaume", "Brox", "Thomas", "Andres", "Bjoern"], "venue": "In ICCV,", "year": 2015}, {"title": "Image segmentation using higher-order correlation clustering", "authors": ["Kim", "Sungwoong", "Yoo", "Chang D", "Nowozin", "Sebastian", "Kohli", "Pushmeet"], "venue": "IEEE Transactions on Pattern Analysis and Machine Intelligence,", "year": 2014}, {"title": "Correlation clustering and two-edge-connected augmentation for planar graphs", "authors": ["Klein", "Philip N", "Mathieu", "Claire", "Zhou", "Hang"], "venue": "In Symposium on Theoretical Aspects of Computer Science,", "year": 2015}, {"title": "Joint graph decomposition and node labeling by local search", "authors": ["Levinkov", "Evgeny", "Uhrig", "Jonas", "Tang", "Siyu", "Omran", "Mohamed", "Insafutdinov", "Eldar", "Kirillov", "Alexander", "Rother", "Carsten", "Brox", "Thomas", "Schiele", "Bernt", "Andres", "Bjoern"], "year": 2017}, {"title": "Comparing clusteringsan information based distance", "authors": ["Meil\u0103", "Marina"], "venue": "Journal of Multivariate Analysis,", "year": 2007}, {"title": "Solution stability in linear programming relaxations: Graph partitioning and unsupervised learning", "authors": ["Nowozin", "Sebastian", "Jegelka", "Stefanie"], "venue": "In ICML,", "year": 2009}, {"title": "Global interactions in random field models: A potential function ensuring connectedness", "authors": ["Nowozin", "Sebastian", "Lampert", "Christoph H"], "venue": "SIAM Journal on Imaging Sciences,", "year": 2010}, {"title": "Objective criteria for the evaluation of clustering methods", "authors": ["Rand", "William M"], "venue": "Journal of the American Statistical Association,", "year": 1971}, {"title": "Multiple people tracking by lifted multicut and person re-identification", "authors": ["Tang", "Siyu", "Andriluka", "Mykhaylo", "Andres", "Bjoern", "Schiele", "Bernt"], "venue": "In CVPR,", "year": 2017}, {"title": "Coalition structure generation over graphs", "authors": ["Voice", "Thomas", "Polukarov", "Maria", "Jennings", "Nicholas R"], "venue": "Journal of Artificial Intelligence Research,", "year": 2012}, {"title": "Fast planar correlation clustering for image segmentation", "authors": ["Yarkony", "Julian", "Ihler", "Alexander", "Fowlkes", "Charless C"], "venue": "In ECCV,", "year": 2012}], "id": "SP:a65b4ca798c36ef72f9c2f97fc97078d3ecb9a80", "authors": [{"name": "Andrea Hor\u0148\u00e1kov\u00e1", "affiliations": []}, {"name": "Jan-Hendrik Lange", "affiliations": []}, {"name": "Bjoern Andres", "affiliations": []}], "abstractText": "We study the set of all decompositions (clusterings) of a graph through its characterization as a set of lifted multicuts. This leads us to practically relevant insights related to the definition of classes of decompositions by must-join and must-cut constraints and related to the comparison of clusterings by metrics. To find optimal decompositions defined by minimum cost lifted multicuts, we establish some properties of some facets of lifted multicut polytopes, define efficient separation procedures and apply these in a branchand-cut algorithm.", "title": "Analysis and Optimization of Graph Decompositions by Lifted Multicuts"}